<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <h1>프로미스 체이닝을 실습하면서 간편함을 체감해보자</h1>

        <script>
            function add(n1, n2) {
                return new Promise(function (resolve, reject) {
                    setTimeout(function () {
                        let result = n1 + n2;
                        resolve(result);
                    }, 1000);
                });
            }

            function mul(n) {
                return new Promise(function (resolve, reject) {
                    setTimeout(function () {
                        let result = n * 2;
                    });
                }, 700);
            }

            function sub(n) {
                return new Promise(function (resolve, reject) {
                    setTimeout(function () {
                        let result = n - 1;
                        reject(new Error(`의도적으로 에러를 일으켜봤음!`));
                    });
                }, 500);
            }

            add(4, 3)
                .then(function (result) {
                    console.log('1 :', result);
                    return mul(result);
                })
                .then(function (result) {
                    console.log('2: ', result);
                    return sub(result);
                })
                .then(function (result) {
                    console.log(`3:, $ {result}`);
                })
                .catch(function (err) {
                    console.log('실패');
                    console.log(err);
                });
        </script>
    </body>
</html>
